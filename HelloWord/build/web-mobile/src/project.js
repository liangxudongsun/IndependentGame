require=function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var a="function"==typeof require&&require;if(!s&&a)return a(i,!0);if(c)return c(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var p=o[i]={exports:{}};e[i][0].call(p.exports,function(t){var o=e[i][1][t];return r(o||t)},p,p.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({Block:[function(t,e,o){"use strict";cc._RF.push(e,"ab0b5CnvJpA54lTe7wtZdLV","Block"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,c=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockPos=new cc.Vec2(0,0),e.widthPercent=1,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.update=function(t){},e.prototype.onDestory=function(){this.node.removeFromParent(!0)},e.prototype.setPosition=function(t){this.blockPos=t},e.prototype.setWidthPercent=function(t){this.widthPercent=t},e=__decorate([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Common:[function(t,e,o){"use strict";cc._RF.push(e,"7995613PwxEnq/x52tQxl4y","Common"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.GetInstance=function(){return null==this.Instance&&(this.Instance=new t),this.Instance},t.prototype.GetRandomNumber=function(){return 100*Math.random()},t.Instance=null,t}();o.Common=n,cc._RF.pop()},{}],ConstData:[function(t,e,o){"use strict";cc._RF.push(e,"65ef2v6xw5CqoPUdH1HuG3R","ConstData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.StickAddHightSpeed=.3,t.HeroRunSpeed=100,t.HeroDisDrop=500,t.HeroTimeDrop=1,t.HeroStartPos=new cc.Vec2(110,300),t}();o.ConstData=n,cc._RF.pop()},{}],GameControl:[function(t,e,o){"use strict";cc._RF.push(e,"5320efR149LtbyHHRs8R43J","GameControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Hero"),r=t("./../Tool/Common"),c=t("../Tool/ConstData"),i=t("./Stick"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroProfab=null,e.stickProfab=null,e.blockProfab=null,e.blockGroup=null,e.hero=null,e.stick=null,e.blockArray=[],e.onMouseDown=function(t){this.hero.setHeroState(2)}.bind(e),e.onMouseUp=function(t){this.hero.setHeroState(3)&&(this.hero.heroRun(),this.deleteBlock(),this.createBlock())}.bind(e),e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown),this.node.on(cc.Node.EventType.MOUSE_UP,this.onMouseUp)},e.prototype.start=function(){this.createHeroAndStick()},e.prototype.onDestory=function(){this.node.off(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown),this.node.off(cc.Node.EventType.MOUSE_UP,this.onMouseUp)},e.prototype.createBlock=function(){var t=r.Common.GetInstance().GetRandomNumber()-50+960,e=r.Common.GetInstance().GetRandomNumber()/100+.2;e>.6&&(e=.6);var o=cc.instantiate(this.blockProfab);o.setPosition(new cc.Vec2(0,t)),o.setScale(e,1),this.blockArray.push(o),this.blockGroup.addChild(o)},e.prototype.createHeroAndStick=function(){this.hero=cc.instantiate(this.heroProfab).getComponent(n.default),this.node.addChild(this.hero.node),this.hero.node.setPosition(c.ConstData.HeroStartPos),this.hero.setBlockArray(this.blockArray),this.stick=cc.instantiate(this.stickProfab).getComponent(i.default),this.node.addChild(this.stick.node);var t=c.ConstData.HeroStartPos;t.x+=25,this.stick.node.setPosition(t),this.hero.setStick(this.stick.node)},e.prototype.deleteBlock=function(){for(var t=0;t<this.blockArray.length;t++){var e=this.blockArray[t];if(e.position.x<0){this.blockArray[t]=null,e.removeFromParent(!0);break}}},__decorate([u(cc.Prefab)],e.prototype,"heroProfab",void 0),__decorate([u(cc.Prefab)],e.prototype,"stickProfab",void 0),__decorate([u(cc.Prefab)],e.prototype,"blockProfab",void 0),__decorate([u(cc.Node)],e.prototype,"blockGroup",void 0),__decorate([u([cc.Node])],e.prototype,"blockArray",void 0),e=__decorate([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Tool/ConstData":"ConstData","./../Tool/Common":"Common","./Hero":"Hero","./Stick":"Stick"}],Hero:[function(t,e,o){"use strict";cc._RF.push(e,"54807Xilg1P8p7DRIaniblv","Hero"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=cc._decorator,c=r.ccclass,i=(r.property,t("./../Tool/ConstData")),s=t("./Stick");!function(t){t[t.HeroIdleEnum=1]="HeroIdleEnum",t[t.HeroAddStick=2]="HeroAddStick",t[t.HeroRunEnum=3]="HeroRunEnum",t[t.HeroDropEnum=4]="HeroDropEnum"}(n||(n={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroPosition=new cc.Vec2(0,0),e.heroState=n.HeroIdleEnum,e.stick=null,e.heroMoveDis=0,e.timeFun=function(t){this.heroState=n.HeroIdleEnum,this.checkHeroState()&&this.moveBlock()}.bind(e),e}return __extends(e,t),e.prototype.start=function(){this.heroState=n.HeroIdleEnum},e.prototype.update=function(t){switch(this.heroState){case n.HeroIdleEnum:break;case n.HeroAddStick:this.motorStickHight(t);break;case n.HeroRunEnum:break;case n.HeroDropEnum:this.heroDrop()}},e.prototype.onDestory=function(){this.node.removeFromParent(!0)},e.prototype.setHeroState=function(t){switch(t){case 2:return this.heroState==n.HeroIdleEnum&&(this.stick.resetStick(this.node.getPosition()),this.heroState=n.HeroAddStick,!0);case 3:return this.heroState==n.HeroAddStick&&(this.heroState=n.HeroRunEnum,!0)}return!1},e.prototype.setStick=function(t){this.stick=t.getComponent(s.default)},e.prototype.setBlockArray=function(t){this.blockArray=t},e.prototype.motorStickHight=function(t){this.stick.addStickHight(t)},e.prototype.heroRun=function(t){this.stick.putStickDown();var e=this.stick.node.getBoundingBox().size.width,o=e/i.ConstData.HeroRunSpeed,n=cc.moveBy(o,new cc.Vec2(e+50,0));this.node.runAction(n),this.heroMoveDis=e+50,this.scheduleOnce(this.timeFun,o)},e.prototype.heroDrop=function(){var t=cc.moveBy(i.ConstData.HeroTimeDrop,new cc.Vec2(10,-i.ConstData.HeroDisDrop));this.node.runAction(t),this.heroState=n.HeroIdleEnum},e.prototype.checkHeroState=function(){for(var t=!1,e=0;e<this.blockArray.length;e++){var o=this.blockArray[e].getBoundingBox(),r=this.node.getBoundingBox();if(r.y=50,cc.log("block"+o),cc.log("hero"+r),o.containsRect(r))return t=!0}return this.heroState=n.HeroDropEnum,t},e.prototype.moveBlock=function(){var t=this.node.position;t.x-=this.heroMoveDis,this.node.position=t;for(var e=0;e<this.blockArray.length;e++)this.blockArray[e].position.x-=this.heroMoveDis},e=__decorate([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./../Tool/ConstData":"ConstData","./Stick":"Stick"}],HttpUtils:[function(t,e,o){"use strict";cc._RF.push(e,"f599arGRDRBUZPK6F+O3ol7","HttpUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.GetInstance=function(){return null==t.Instance&&(t.Instance=new t),t.Instance},t.prototype.httpGets=function(t,e){var o=cc.loader.getXMLHttpRequest();o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300){var t=o.responseText;e(t)}},o.open("GET",t,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate"),o.timeout=5e3,o.send()},t.prototype.httpPost=function(t,e,o){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4===n.readyState&&n.status>=200&&n.status<300){var t=n.responseText;o(t)}else o(-1)},n.open("POST",t,!0),cc.sys.isNative&&n.setRequestHeader("Accept-Encoding","gzip,deflate"),n.timeout=5e3,n.send(e)},t.Instance=null,t}();o.HttpUtils=n,cc._RF.pop()},{}],JsonUtils:[function(t,e,o){"use strict";cc._RF.push(e,"0d7a6IZ02RK1JGtW4lnoCJ/","JsonUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.parseMath=function(t,e){cc.log("err["+t+"]");var o=JSON.stringify(e);cc.log(o);var n=JSON.parse(JSON.stringify(e))[0].FloorTexture[0].name;cc.log(n)}}return t.GetInstance=function(){return null==this.Instance&&(this.Instance=new t),this.Instance},t.prototype.JsonParse=function(t,e){void 0===t&&(t=""),void 0===e&&(e=this.parseMath),cc.loader.loadRes(t,e)},t.Instance=null,t}();o.JsonUtils=n,cc._RF.pop()},{}],MouseTest:[function(t,e,o){"use strict";cc._RF.push(e,"e45e8X033BKk4MZqW4KcESP","MouseTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,c=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e);cc.log(o.x+":"+o.y)}.bind(e),e}return __extends(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown)},e=__decorate([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Stick:[function(t,e,o){"use strict";cc._RF.push(e,"60b36oY/25ODJU239Ko+Ngs","Stick"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,c=(n.property,t("./../Tool/ConstData")),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stickPosition=new cc.Vec2(0,0),e.hightPercent=0,e}return __extends(e,t),e.prototype.start=function(){this.node.setScale(1,this.hightPercent)},e.prototype.onDestory=function(){this.node.removeFromParent(!0)},e.prototype.addStickHight=function(t){this.hightPercent+=c.ConstData.StickAddHightSpeed*t,this.hightPercent>1&&(this.hightPercent=1),this.node.setScale(1,this.hightPercent)},e.prototype.putStickDown=function(){this.node.rotation=90},e.prototype.resetStick=function(t){var e=t;e.x+=25,this.node.setPosition(e),this.hightPercent=0,this.node.setScale(1,this.hightPercent),this.node.rotation=0},e=__decorate([r],e)}(cc.Component);o.default=i,cc._RF.pop()},{"./../Tool/ConstData":"ConstData"}],UI:[function(t,e,o){"use strict";cc._RF.push(e,"556eeJOYbBNGahV8hhrfqJ6","UI"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,c=n.property,i=t("./Tool/Common"),s=t("./Tool/JsonUtils"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.nameLxd="rdy",e.timer=1,e}return __extends(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.start=function(){this.label.string=this.nameLxd;var t=new cc.Node("Sprite").addComponent(cc.Sprite);t.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/Texture/3.png")),t.node.setPosition(new cc.Vec2(568,320)),this.node.addChild(t.node);var e=cc.rotateBy(2,180);t.node.runAction(cc.repeatForever(e)),s.JsonUtils.GetInstance().JsonParse("Json/floorTextureMap.json")},e.prototype.update=function(t){this.timer=i.Common.GetInstance().Add(this.timer),this.label.string=this.timer.toString()},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.KEY.a:console.log("Press a key")}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.KEY.a:console.log("release a key")}},__decorate([c(cc.Label)],e.prototype,"label",void 0),__decorate([c],e.prototype,"text",void 0),__decorate([c],e.prototype,"nameLxd",void 0),e=__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./Tool/Common":"Common","./Tool/JsonUtils":"JsonUtils"}]},{},["Block","GameControl","Hero","Stick","MouseTest","Common","ConstData","HttpUtils","JsonUtils","UI"]);